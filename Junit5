import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.Mockito.mock;

import java.util.ArrayList;
import java.util.List;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

public class MtnInsightsManagerTest {

    private MtnInsightsManager mtnInsightsManager;

    @BeforeEach
    public void setup() {
        mtnInsightsManager = new MtnInsightsManager();
        // Mocking repositories if needed
        mtnInsightsManager.insightsRepository = mock(MtnInsightsRepository.class);
        mtnInsightsManager.aggrInsightRepository = mock(AggregateInsightsRepository.class);
        mtnInsightsManager.ecpdByKeyRepository = mock(EcpdByKeyRepository.class);
    }

    @Test
    public void testConvertToMtnInsights() {
        List<MtnInsightsEntity> entities = new ArrayList<>();
        // Add test data to entities list

        boolean flag = true; // or false based on test scenario

        InsightsMtn result = mtnInsightsManager.convertToMtnInsights(entities, flag);

        // Assert statements based on expected behavior
        // For example:
        assertEquals(expectedAmountOfCategories, result.getCategoryInsights().length);
    }

    // Add more test methods for other scenarios as needed

}
```