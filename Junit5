
@Test
public void testMain() {
    try {
        SpringApplication app = new SpringApplication(UWAUpdatesHandlerApplication.class);
        ConfigurableApplicationContext appContext = app.run(args);
        appContext.start();
        MessageConsumer messageConsumerService = appContext.getBean(MessageConsumer.class);
        messageConsumerService.start();
        Runtime.getRuntime().addShutdownHook(new Thread() {
            public void run() {
                messageConsumerService.shutdown();
                appContext.stop();
            }
        });
    } catch (Exception e) {
        log.error("Application startup failed. Exception : " + e);
    }
}

@Test(expected = IllegalStateException.class)
public void testMainWithNullArgs() {
    SpringApplication app = new SpringApplication(UWAUpdatesHandlerApplication.class);
    app.run(null);
}

@Test(expected = IllegalStateException.class)
public void testMainWithEmptyArgs() {
    SpringApplication app = new SpringApplication(UWAUpdatesHandlerApplication.class);
    app.run("");
}

@Test
public void testMessageConsumerStart() {
    MessageConsumer messageConsumerService = new MessageConsumer();
    messageConsumerService.start();
}

@Test(expected = IllegalStateException.class)
public void testMessageConsumerStartWithNullMessage() {
    MessageConsumer messageConsumerService = new MessageConsumer();
    messageConsumerService.start(null);
}

@Test
public void testMessageConsumerShutdown() {
    MessageConsumer messageConsumerService = new MessageConsumer();
    messageConsumerService.start();
    messageConsumerService.shutdown();
}

@Test(expected = IllegalStateException.class)
public void testMessageConsumerShutdownWithNullMessage() {
    MessageConsumer messageConsumerService = new MessageConsumer();
    messageConsumerService.shutdown(null);
}