The error message "The method builder() is undefined for the type ConsumerRecords" occurs when you try to call the builder() method on a ConsumerRecords object, but the ConsumerRecords class does not have a builder() method.

To fix this error, you can use the static method ConsumerRecords.withRecords() instead of the builder() method. Here is the updated code for the testKafkaConsumer() method:

```
@Test
public void testKafkaConsumer() {
// Mock consumer record
ConsumerRecord record = mock(ConsumerRecord.class);
when(record.topic()).thenReturn("topic");
when(record.offset()).thenReturn(0L);
when(record.partition()).thenReturn(0);
when(record.key()).thenReturn("key");
when(record.value()).thenReturn("value");

// Build the mock consumer records with the mock record
ConsumerRecords records = 
ConsumerRecords.withRecords(
new ArrayListnew HashMap

// Set up the behavior of the consumer
when(consumer.poll(any(Duration.class))).thenReturn(records);

// Call the consumer method
consumer.poll(Duration.ofMillis(100));

// Verify that the poll method was called once
verify(consumer, times(1)).poll(Duration.ofMillis(100));
}
```

Note that the withRecords() method takes two arguments - a list of ConsumerRecord objects and a map of TopicPartition to List of ConsumerRecord objects. In this case, we are passing a list of a single ConsumerRecord object and an empty map.