@Test
public void testMergeArrayMethodWithNullTagFromDb() throws Exception {
    Alarm alarm = new Alarm();
    alarm.setTag(new String[]{"tag1", "tag2"});

    AlarmRepositoryImpl alarmRepositoryImpl = new AlarmRepositoryImpl();
    Method method = AlarmRepositoryImpl.class.getDeclaredMethod("mergeArrayMethod", Object.class, Alarm.class);
    method.setAccessible(true);
    Set<String> result = (Set<String>) method.invoke(alarmRepositoryImpl, null, alarm);

    assertEquals(2, result.size());
    assertTrue(result.contains("tag1"));
    assertTrue(result.contains("tag2"));
}

@Test
public void testMergeArrayMethodWithNonNullTagFromDb() throws Exception {
    Alarm alarm = new Alarm();
    alarm.setTag(new String[]{"tag1", "tag2"});

    AlarmRepositoryImpl alarmRepositoryImpl = new AlarmRepositoryImpl();
    Method method = AlarmRepositoryImpl.class.getDeclaredMethod("mergeArrayMethod", Object.class, Alarm.class);
    method.setAccessible(true);
    Set<String> result = (Set<String>) method.invoke(alarmRepositoryImpl, new String[]{"tag3", "tag4"}, alarm);

    assertEquals(4, result.size());
    assertTrue(result.contains("tag1"));
    assertTrue(result.contains("tag2"));
    assertTrue(result.contains("tag3"));
    assertTrue(result.contains("tag4"));
}