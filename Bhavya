import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.Mockito.*;

import java.io.IOException;
import java.nio.file.Paths;

import org.apache.sshd.common.file.virtualfs.VirtualFileSystemFactory;
import org.apache.sshd.common.keyprovider.SimpleGeneratorHostKeyProvider;
import org.apache.sshd.server.SshServer;
import org.apache.sshd.server.subsystem.sftp.SftpSubsystemFactory;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.Mockito;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;

class SSHServerSimulatorTest {

    private SSHServerSimulator sshServerSimulator;

    @BeforeEach
    void setUp() {
        sshServerSimulator = new SSHServerSimulator();
    }

    @Test
    void testStartServer() {
        // Create mock objects
        SshServer sshServerMock = Mockito.mock(SshServer.class);

        // Set mocked values
        sshServerSimulator.setHostedPath("test/hosted/path");
        sshServerSimulator.setSshHost("localhost");
        sshServerSimulator.setSshPort(22);

        // Mock different behavior for getKeyPairProvider and setFileSystemFactory methods
        doNothing().when(sshServerMock).setKeyPairProvider(any(SimpleGeneratorHostKeyProvider.class));
        doNothing().when(sshServerMock).setFileSystemFactory(any(VirtualFileSystemFactory.class));

        // Call startServer method
        assertDoesNotThrow(() -> sshServerSimulator.startServer());

        // Verify that the methods were called
        verify(sshServerMock, times(1)).setKeyPairProvider(any(SimpleGeneratorHostKeyProvider.class));
        verify(sshServerMock, times(1)).setFileSystemFactory(any(VirtualFileSystemFactory.class));

        // Add more assertions as needed
    }
}
Modify the main class to add setter methods for the variables used:

@Service
public class SSHServerSimulator {

    private String hostedPath;
    private String sshHost;
    private int sshPort;

    // Add setter methods
    public void setHostedPath(String hostedPath) {
        this.hostedPath = hostedPath;
    }

    public void setSshHost(String sshHost) {
        this.sshHost = sshHost;
    }

    public void setSshPort(int sshPort) {
        this.sshPort = sshPort;
    }

    // Add other existing code here
}
This modification allows us to set the values for these variables in the test class.