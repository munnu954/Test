import org.junit.jupiter.api.Test;
import org.mockito.Mockito;
import org.springframework.core.env.Environment;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.Mockito.mock;

public class CBRSSuppressionApplicationTest {

    @Test
    public void testMain() {
        Environment env = mock(Environment.class);
        Mockito.when(env.getProperty("RDB_BAD_QUERY")).thenReturn("SELECT * FROM users WHERE id = ?");
        
        CBRSSuppressionApplication app = new CBRSSuppressionApplication(env);
        
        // Test exception handling
        Exception ex = new UnsatisfiedDependencyException("Validation failed for query");
        ex.addSuppressed(new RuntimeException("Test exception"));
        
        try {
            app.main(new String[]{});
        } catch (UnsatisfiedDependencyException e) {
            assertEquals("SELECT * FROM users WHERE id = ?" + ":Test exception", CBRSSuppressionApplication.badQuery);
        }
    }
}