import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.Mockito.*;

import java.io.UnsupportedEncodingException;
import java.net.URLDecoder;
import java.nio.charset.StandardCharsets;

import org.junit.jupiter.api.Test;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.slf4j.Logger;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.web.util.UriUtils;

@SpringBootTest
public class CommonWrapperControllerTest {

    @InjectMocks
    private CommonWrapperController commonWrapperController;

    @Mock
    private ClrGraphicsService clrGraphicsService;

    @Test
    public void testGetClrGraphics_CatchBlock() {
        String circuitId = "test_circuitId";
        String sourceSys = "test_sourceSys";
        String cnd = "test_cnd";
        String phyModel = "test_phyModel";

        MockitoAnnotations.initMocks(this);

        when(clrGraphicsService.getClrGraphics(anyString(), anyString(), anyString(), anyString()))
                .thenReturn("Test response");

        try {
            doThrow(new UnsupportedEncodingException()).when(URLDecoder.class);
            URLDecoder.decode(anyString(), eq(StandardCharsets.UTF_8.toString()));
        } catch (UnsupportedEncodingException e) {
        }

        String response = commonWrapperController.getClrGraphics(circuitId, sourceSys, cnd, phyModel);

        assertEquals("Test response", response);
    }
}
