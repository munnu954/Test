private String queryBasedOnParameter(Map<String, Object> queryParams) {
    String query = "";
    StringJoiner finalQuery = new StringJoiner(" ");

    // Start building the base query
    if ("LOCATION".equalsIgnoreCase((String) queryParams.get("outputControl"))) {
        finalQuery.add(coconutDeviceMSConstants.COCONUT_V3_SITE_QUERY);
    }

    // Initialize a StringJoiner for the WHERE conditions
    StringJoiner whereConditions = new StringJoiner(" AND ", " WHERE ", "");

    // Check for locationCLLI in queryParams
    if (queryParams.containsKey("locationCLLI")) {
        String locationCLLI = (String) queryParams.get("locationCLLI");
        if (locationCLLI != null && !locationCLLI.isEmpty()) {
            whereConditions.add("locationCLLI = '" + locationCLLI + "'");
        }
    }

    // Check for siteName in queryParams
    if (queryParams.containsKey("siteName")) {
        String siteName = (String) queryParams.get("siteName");
        if (siteName != null && !siteName.isEmpty()) {
            whereConditions.add("siteName = '" + siteName + "'");
        }
    }

    // Append the WHERE conditions to the finalQuery if any conditions were added
    if (whereConditions.length() > 0) {
        finalQuery.add(whereConditions.toString());
    }

    return finalQuery.toString();
}