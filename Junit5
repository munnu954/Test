import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

class TrunkProcessorTestStage2 {

    @Test
    void process_segment_with_trail_and_in_segments_set_prev_segment_as_target() {
        // Given
        TrunkProcessor trunkProcessor = TrunkProcessor.getInstance();
        List<Node> nodes = new ArrayList<>();
        List<Link> links = new ArrayList<>();
        Map<String, List<Node>> clliNodeMap = new HashMap<>();
        int i = 1;
        AtomicInteger ukCount = new AtomicInteger(1);
        String sourceSys = "sourceSys";

        ClrComponent clrComponentList_0 = new ClrComponent();
        clrComponentList_0.setType(AbstractClrComponentProcessor.CommonWrapperConstants.TRAIL);
        clrComponentList_0.setCircuitComp(Collections.singletonList(new CircuitComp().setCircuitInfo(Collections.singletonList(new CircuitInfo().setCircuitName("Sample Circuit Name").setStatus("Active").setServiceType("Primary").setType("SONET").setBw("10 Gbps")))));

        ClrComponent clrComponentList_1 = new ClrComponent();
        clrComponentList_1.setType(AbstractClrComponentProcessor.CommonWrapperConstants.SEGEMENT);

        // When
        trunkProcessor.process(nodes, links, clrComponentList_0, Collections.singletonList(clrComponentList_1), clliNodeMap, i, ukCount, sourceSys);

        // Then
        Assertions.assertEquals(links.get(0).getTarget(), "UNKNOWN1");
    }
}