import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.util.StdDateFormat;
import java.io.FileWriter;
import java.io.IOException;

// Add the Jackson dependency in your pom.xml file
// For Maven
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.13.0</version>
</dependency>

// For Gradle
dependencies {
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.13.0'
}

public void writeLogToFile(FileMetadata metadata, String destinationFolderPath) {
    String logFilePath = destinationFolderPath + "/log.txt";
    try {
        ObjectMapper mapper = new ObjectMapper();
        mapper.enable(SerializationFeature.INDENT_OUTPUT);
        mapper.setDateFormat(new StdDateFormat());

        try (FileWriter fileWriter = new FileWriter(logFilePath, true)) {
            String jsonString = mapper.writeValueAsString(metadata);
            fileWriter.write(jsonString);
            fileWriter.write(System.lineSeparator());
            fileWriter.flush();
        } catch (IOException e) {
            LOGGER.error("Error writing log to file", e);
        }
    } catch (IOException e) {
        LOGGER.error("Error creating ObjectMapper", e);
    }
}