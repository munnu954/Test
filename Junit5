To update the `queryBasedOnParameter` method in the `CoconutServiceVersion3` class, you'll need to check for the presence of `locationCLLI` and `siteName` in the `queryParams` map. If they exist, append the appropriate conditions using the constants from the `CoconutDeviceMSConstants` class. Here's how you can modify the code:

```java
private String queryBasedOnParameter(Map<String, Object> queryParams) {
    StringJoiner finalQuery = new StringJoiner(" ");

    // Add the base query
    if ("LOCATION".equalsIgnoreCase((String) queryParams.get("outputControl"))) {
        finalQuery.add(CoconutDeviceMSConstants.COCONUT_V3_SITE_QUERY);
    }

    // Check for locationCLLI and append condition if present
    if (queryParams.containsKey("locationCLLI")) {
        String locationCLLI = ((String) queryParams.get("locationCLLI")).toLowerCase();
        finalQuery.add(CoconutDeviceMSConstants.COCONUT_V3_LOCATION_CLLI.replace(": locationCLLI", "'" + locationCLLI + "'"));
    }

    // Check for siteName and append condition if present
    if (queryParams.containsKey("siteName")) {
        String siteName = ((String) queryParams.get("siteName")).toLowerCase();
        finalQuery.add(CoconutDeviceMSConstants.COCONUT_V3_SITE_NAME.replace(":siteName", "'" + siteName + "'"));
    }

    return finalQuery.toString();
}
```

### Key Changes:
- **Lowercasing**: Convert `locationCLLI` and `siteName` from `queryParams` to lowercase.
- **Condition Check**: Added checks for whether `locationCLLI` and `siteName` exist in `queryParams`.
- **Query Building**: Appended the appropriate conditions to `finalQuery` only if the parameters are present. Used the `.replace()` method to substitute the placeholders with actual values.