@Test
void testApplyPostingRule() throws Exception {
    // Create test data
    Alarm alarm = new Alarm();
    PostingRule rule = new PostingRule();
    HashMap<String, Object> alarmMap = new HashMap<>();
    
    ObjectMapper objectMapper = new ObjectMapper();
    
    // Mock dependencies
    when(utils.evaluateExpression(anyString(), anyMap())).thenReturn("TestObject");
    
    ResponseEntity<String> responseEntity = new ResponseEntity<>("{}",
            HttpStatus.OK);
    when(topoApiClient.fetchTopologyTraversalDetails(any(Alarm.class), any(PostingRule.class), anyString()))
            .thenReturn(responseEntity);
    
    JsonNode jsonNodeTmp = objectMapper.readTree("{\"test\": \"test\"}");
    JsonNode topologyObjectsNode = objectMapper.createArrayNode().add(jsonNodeTmp);
    
    JsonNode jsonNode = objectMapper.readTree("{\"TopologyObjects\": [{\"key\": \"value\"}]}");
    when(AlarmPostingConstants.getObjectMapper().readTree(anyString())).thenReturn(jsonNode);
    
    // Call the method
    Alarm result = postingRuleProcessingService.applyPostingRule(alarm, rule, alarmMap);
    
    // Verify the result
    assertNotNull(result);
    assertEquals("TestObject", result.getAlarmedObject());
}
