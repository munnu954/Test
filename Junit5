import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.Mockito.*;

import org.junit.jupiter.api.Test;

public class AlarmRepositoryImplTest {

    @Test
    public void testPostAlarmForEachIteration_stateUnclorrelated_expectStateUpdated() {
        // Given
        Alarm alarm = new Alarm();
        alarm.setState(postgresConf.getAlarmStateMap().get(postgresConf.getAlarmStateUnclorrelated()));
        String state = postgresConf.getAlarmStateMap().get(postgresConf.getAlarmStateRelated());

        // When
        alarmRepository.postAlarmForEachIteration(alarm, "compId");

        // Then
        assertEquals(state, alarm.getState());
    }

    @Test
    public void testPostAlarmForEachIteration_alarmStateCleared_expectNoStateUpdate() {
        // Given
        Alarm alarm = new Alarm();
        alarm.setState(postgresConf.getAlarmStateMap().get(postgresConf.getAlarmStateCleared()));
        String state = postgresConf.getAlarmStateMap().get(postgresConf.getAlarmStateUnclorrelated());

        // When
        alarmRepository.postAlarmForEachIteration(alarm, "compId");

        // Then
        assertEquals(postgresConf.getAlarmStateMap().get(postgresConf.getAlarmStateCleared()), alarm.getState());
    }

    // Add more test cases covering other conditions in a similar manner

}