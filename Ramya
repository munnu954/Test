import org.springframework.data.elasticsearch.annotations.Query;
import org.springframework.stereotype.Repository;
import org.vdsi.space.collections.lucene.LuceneRepository;
import org.vdsi.space.collections.lucene.model.CollectionAudit;

@Repository
public interface CollectionAuditLuceneRepository extends LuceneRepository<CollectionAudit, String> {

    @Query("{\"bool\": {\"must\": [{\"match\": {\"jobStatus\": \"COLLECTION_SUCCESSFUL\"}}], \"must_not\": [{\"match\": {\"jobId\": \"EXCLUDE_JOB_ID\"}}]}}")
    CollectionAudit findTopSuccessfulAuditWithoutJobId(String jobId);

}
