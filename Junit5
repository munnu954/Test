The `NullPointerException` you're encountering suggests that the `Node` object being accessed is null in the code block where you're trying to retrieve the `portId`. This can happen if the `getNode` method does not find a matching node based on the shelf ID or target port ID.

To avoid this issue, we need to ensure that the `Node` objects are properly initialized and that the `getNode` method is able to find the relevant `Node` when needed. Below is the revised version of the test cases, ensuring that `Node` instances are created and added appropriately to avoid null references.

```java
import static org.junit.jupiter.api.Assertions.*;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import java.util.*;
import java.util.concurrent.atomic.AtomicInteger;

class PortProcessorTest {

    private PortProcessor portProcessor;
    private List<Node> nodes;
    private List<Link> links;
    private ClrComponent clrComponent;
    private List<ClrComponent> clrComponentList;
    private Map<String, List<Node>> clliNodeMap;
    private AtomicInteger ukCount;
    private String sourceSys;

    @BeforeEach
    void setUp() {
        portProcessor = PortProcessor.getInstance();
        nodes = new ArrayList<>();
        links = new ArrayList<>();
        clrComponent = new ClrComponent();
        clrComponentList = new ArrayList<>();
        clliNodeMap = new HashMap<>();
        ukCount = new AtomicInteger(0);
        sourceSys = "testSource";
    }

    @Test
    void testProcess_WithDifferentPortIDs() {
        // Arrange
        PortRef eqtObject = new PortRef();
        eqtObject.setPortID("port2");
        eqtObject.setShelfID("shelf2");

        EquipmentComp equipmentComp = new EquipmentComp();
        equipmentComp.setPortRef(Collections.singletonList(eqtObject));

        clrComponent.setEquipmentComp(Collections.singletonList(equipmentComp));
        clrComponent.setType(CommonWrapperConstants.PORT);

        // Add the previous CLR component
        PortRef prevPortRef = new PortRef();
        prevPortRef.setPortID("port1");
        prevPortRef.setShelfID("shelf1");

        EquipmentComp prevEquipmentComp = new EquipmentComp();
        prevEquipmentComp.setPortRef(Collections.singletonList(prevPortRef));

        ClrComponent prevClrComponent = new ClrComponent();
        prevClrComponent.setEquipmentComp(Collections.singletonList(prevEquipmentComp));
        prevClrComponent.setType(CommonWrapperConstants.PORT);

        clrComponentList.add(prevClrComponent); // Add previous component to the list

        // Create a Node for the previous link
        Node prevNode = new Node();
        prevNode.setPortId("port1");
        nodes.add(prevNode); // Add Node to nodes list

        Link prevLink = new Link();
        prevLink.setTarget("port1"); // Setting the target to the previous port
        links.add(prevLink); // Add a previous link to trigger the else condition

        // Act
        portProcessor.process(nodes, links, clrComponent, clrComponentList, clliNodeMap, 1, ukCount, sourceSys);

        // Assert
        assertEquals(2, links.size(), "There should be two links created.");
        Link lastLink = links.get(1);
        assertEquals("port2", lastLink.getTarget(), "The target of the last link should be eqtObject portID.");
        assertEquals("port1", lastLink.getSource(), "The source of the last link should be the previous node's port ID.");
    }

    @Test
    void testProcess_WithNonExistingNode() {
        // Arrange
        PortRef eqtObject = new PortRef();
        eqtObject.setPortID("port3");
        eqtObject.setShelfID("shelf3");

        EquipmentComp equipmentComp = new EquipmentComp();
        equipmentComp.setPortRef(Collections.singletonList(eqtObject));

        clrComponent.setEquipmentComp(Collections.singletonList(equipmentComp));
        clrComponent.setType(CommonWrapperConstants.PORT);

        // Previous ClrComponent
        PortRef prevPortRef = new PortRef();
        prevPortRef.setPortID("port2");
        prevPortRef.setShelfID("shelf2");

        EquipmentComp prevEquipmentComp = new EquipmentComp();
        prevEquipmentComp.setPortRef(Collections.singletonList(prevPortRef));

        ClrComponent prevClrComponent = new ClrComponent();
        prevClrComponent.setEquipmentComp(Collections.singletonList(prevEquipmentComp));
        prevClrComponent.setType(CommonWrapperConstants.PORT);

        clrComponentList.add(prevClrComponent); // Add previous component to the list

        // Create a Node for the previous link
        Node prevNode = new Node();
        prevNode.setPortId("port2");
        nodes.add(prevNode); // Add Node to nodes list

        Link prevLink = new Link();
        prevLink.setTarget("port2");
        links.add(prevLink); // Add a previous link

        // Act
        portProcessor.process(nodes, links, clrComponent, clrComponentList, clliNodeMap, 1, ukCount, sourceSys);

        // Assert
        assertEquals(2, links.size(), "There should be two links created.");
        Link lastLink = links.get(1);
        assertEquals("port3", lastLink.getTarget(), "The target of the last link should be eqtObject portID.");
        assertEquals("port2", lastLink.getSource(), "The source of the last link should be the previous node's port ID.");
    }

    @Test
    void testProcess_WithExistingNodeInList() {
        // Arrange
        PortRef eqtObject = new PortRef();
        eqtObject.setPortID("port4");
        eqtObject.setShelfID("shelf4");

        EquipmentComp equipmentComp = new EquipmentComp();
        equipmentComp.setPortRef(Collections.singletonList(eqtObject));

        clrComponent.setEquipmentComp(Collections.singletonList(equipmentComp));
        clrComponent.setType(CommonWrapperConstants.PORT);

        // Add previous CLR component
        PortRef prevPortRef = new PortRef();
        prevPortRef.setPortID("port3");
        prevPortRef.setShelfID("shelf3");

        EquipmentComp prevEquipmentComp = new EquipmentComp();
        prevEquipmentComp.setPortRef(Collections.singletonList(prevPortRef));

        ClrComponent prevClrComponent = new ClrComponent();
        prevClrComponent.setEquipmentComp(Collections.singletonList(prevEquipmentComp));
        prevClrComponent.setType(CommonWrapperConstants.PORT);

        clrComponentList.add(prevClrComponent); // Add previous component to the list

        // Create a Node for the previous link
        Node existingNode = new Node();
        existingNode.setPortId("port3");
        nodes.add(existingNode); // Add existing Node to nodes list

        Link prevLink = new Link();
        prevLink.setTarget("port3");
        links.add(prevLink); // Add a previous link to trigger the else condition

        // Act
        portProcessor.process(nodes, links, clrComponent, clrComponentList, clliNodeMap, 1, ukCount, sourceSys);

        // Assert
        assertEquals(2, links.size(), "There should be two links created.");
        Link lastLink = links.get(1);
        assertEquals("port4", lastLink.getTarget(), "The target of the last link should be eqtObject portID.");
        assertEquals("port3", lastLink.getSource(), "The source of the last link should be the existing node's port ID.");
    }
}
```

### Changes Made:
1. **Node Creation**: In each test case, I've ensured to create and add `Node` objects representing previous ports before executing the `process` method. This guarantees that when `getNode` is called, it can successfully find the required `Node`.

2. **Assertions**: The assertions remain the same but now they will work correctly without throwing a `NullPointerException` since the relevant nodes are guaranteed to exist in the list.

This should resolve the `NullPointerException` issue you were facing while executing the test cases. Please run the updated test cases and let me know if you encounter any other issues!