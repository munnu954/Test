@Test
public void testMergeArrayMethodWithNullTagFromDb() {

Alarm alarm = new Alarm();

alarm.setTag(new String[]{"tag1 ", "tag2"});

try {
    Method mergeArrayMethod = AlarmRepositoryImpl.class.getDeclaredMethod("mergeArrayMethod", Object.class, Alarm.class);
    mergeArrayMethod.setAccessible(true);
    Set<String> result = (Set<String>) mergeArrayMethod.invoke(alarmRepositoryImpl, null, alarm);

    assertEquals(2, result.size());
    assertTrue(result.contains("tag1"));
    assertTrue(result.contains("tag2"));
} catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException e) {
    e.printStackTrace();
}

}

@Test
public void testMergeArrayMethodWithNonNullTagFromDb() {

Alarm alarm = new Alarm();

alarm.setTag(new String[]{"tag1", "tag2"});

try {
    Method mergeArrayMethod = AlarmRepositoryImpl.class.getDeclaredMethod("mergeArrayMethod", Object.class, Alarm.class);
    mergeArrayMethod.setAccessible(true);
    Set<String> result = (Set<String>) mergeArrayMethod.invoke(alarmRepositoryImpl, new String[]{"tag3", "tag4"}, alarm);

    assertEquals(4, result.size());

    assertTrue(result.contains("tag1"));
    assertTrue(result.contains("tag2"));
    assertTrue(result.contains("tag3"));
    assertTrue(result.contains("tag4"));
} catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException e) {
    e.printStackTrace();
}

}