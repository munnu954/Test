import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;

public class AuditMessageGenerator {

    public static UnifiedAuditMessage generateAuditMessage(String filePath, ProcessType processType, JobStatus jobStatus, String errorMessage) {
        UnifiedAuditMessage auditMessage = new UnifiedAuditMessage();
        auditMessage.setProcessType(processType);
        auditMessage.setInputFilePath(filePath);
        auditMessage.setURL("http://example.com");  
        auditMessage.setPort(8080);  
        auditMessage.setOutputFilePath("/output/path");
        auditMessage.setDelimiters(",");
        auditMessage.setFiletype("CSV");
        auditMessage.setCollectorId(UUID.randomUUID());
        auditMessage.setJobStatus(jobStatus);
        auditMessage.getExceptions().add(errorMessage);
        auditMessage.setDateReceived(LocalDateTime.now());
        auditMessage.setDateProcessed(LocalDateTime.now());
        auditMessage.setJobId(UUID.randomUUID());
        auditMessage.setJarId(UUID.randomUUID());
        auditMessage.setNumOfRecordsInFile(100);
        auditMessage.setNumOfRecordsProcessed(90);
        auditMessage.setNumOfRecordsFailed(10);
        
        // Additional fields for failed audit message
        auditMessage.setErrorCode("ERR001");  // Example: Set error code
        auditMessage.setErrorDescription("File processing failed");  // Example: Set error description
        auditMessage.setStackTrace(getStackTrace());  // Example: Set stack trace

        return auditMessage;
    }

    private static String getStackTrace() {
        // Implement logic to get stack trace
        // This is just an example, you should customize it based on your requirements
        try {
            throw new RuntimeException("Sample exception");
        } catch (Exception e) {
            StringBuilder stackTrace = new StringBuilder();
            for (StackTraceElement element : e.getStackTrace()) {
                stackTrace.append(element.toString()).append("\n");
            }
            return stackTrace.toString();
        }
    }
}
