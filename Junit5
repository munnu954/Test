Here's the updated `queryBasedOnParameter` method in your `CoconutServiceVersion3` class:

```java
private String queryBasedOnParameter(Map<String, Object> queryParams) {
    String query = "";
    StringJoiner finalQuery = new StringJoiner(" AND ", "", " WHERE");
     // Adding the constant query first
     finalQuery.add(coconutDeviceMSConstants.COCONUT_V3_BASE_QUERY);

     if (queryParams != null && !queryParams.isEmpty()) {
         Object locationCLLIObj = queryParams.get("locationCLLI");
         Object siteNameObj = queryParams.get("siteName");
          // Checking for locationCLLI presence and adding the condition
         if (locationCLLIObj instanceof String && !"".equals(locationCLLIObj)) {
             finalQuery.add(" LOCAL_CLLI = '" + locationCLLIObj + "'");
         }
          // Checking for siteName presence and adding the condition
         if (siteNameObj instanceof String && !"". equals(siteNameObj)) {
             finalQuery.add(" SITE_NAME = '" + siteNameObj + "'");
         }
         // Both locationCLLI and siteName present in queryParams, add the condition accordingly
         if ((locationCLLIObj instanceof String && !"".equals(locationCLLIObj)) && (siteNameObj instanceof String && !"".equals(siteNameObj))) {
              finalQuery.add(" AND");
              finalQuery.add(" (LOCAL_CLLI = '"+ locationCLLIObj +"'" + " OR SITE_NAME = '"+ siteNameObj + "' )");
         }
      }
      return finalQuery.toString();
   }
```
This implementation considers all three possibilities - when `locationCLLI`, `siteName`, and both are provided, as specified in your requirement. Additionally, it ensures proper formatting and casing of SQL queries using string joiners.