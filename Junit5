**getZEnd() method:**

```java
import org.junit.jupiter.api.Test;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.MockedStatic;
import org.mockito.Mockito;
import org.mockito.stubbing.Answer;

import com.google.gson.Gson;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNull;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.Mockito.doAnswer;
import static org.mockito.Mockito.doReturn;
import static org.mockito.Mockito.when;

class CircuitDetailsProviderTest_getZEnd_More {

    @Mock
    private RestClientUtil restClientUtil;
    @InjectMocks
    private CircuitDetailsProvider circuitDetailsProvider;

    private static final String CIRCUIT_ID = "12345";
    private static final String CLLI = "12345";
    private static final String FINAL_URL = "http://cktDetServiceName:port/cktDetailuri?circuitId=12345";

    @Test
    void getZEnd_whenEquipmentPortType() {
        // Given
        PortRef portRef = new PortRef();
        portRef.setClliCode(CLLI);
        PortChannel portChannel = new PortChannel();
        portChannel.setPortRef(List.of(portRef));
        ZEnd zEnd = new ZEnd();
        zEnd.setPortChannel(List.of(portChannel));
        Circuit circuit = new Circuit();
        circuit.setZEnd(List.of(zEnd));
        ClrComponent clrComponent = new ClrComponent();
        clrComponent.setEquipmentComp(List.of(new EquipmentComp(List.of(portRef))));
        CircuitData circuitData = new CircuitData();
        circuitData.setCircuitLst(List.of(new CircuitLst(List.of(circuit))));
        CircuitDetailResponse response = new CircuitDetailResponse();
        response.setCircuitData(circuitData);

        String json = "{\"circuitData\": {\"circuitLst\": [{\"circuit\": [{\"clr\": [{\"equipmentComp\": [{\"portRef\": [{\"clliCode\": \"12345\"}]}]}]}]}]}}";
        Gson gson = new Gson();
        CircuitDetailResponse circuitDetailResponse = gson.fromJson(json, CircuitDetailResponse.class);

        // When
        ZEnd returnedZEnd = circuitDetailsProvider.getZEnd(CIRCUIT_ID, CLLI, circuitDetailResponse);

        // Then
        assertEquals(zEnd, returnedZEnd);
    }

    @Test
    void getZEnd_whenEquipmentChannelType() {
        // Given
        PortRef portRef = new PortRef();
        portRef.setClliCode(CLLI);
        PortChannel portChannel = new PortChannel();
        portChannel.setPortRef(List.of(portRef));
        ZEnd zEnd = new ZEnd();
        zEnd.setPortChannel(List.of(portChannel));
        Circuit circuit = new Circuit();
        circuit.setZEnd(List.of(zEnd));
        ClrComponent clrComponent = new ClrComponent();
        clrComponent.setEquipmentComp(List.of(new EquipmentComp(List.of(portChannel))));
        CircuitData circuitData = new CircuitData();
        circuitData.setCircuitLst(List.of(new CircuitLst(List.of(circuit))));
        CircuitDetailResponse response = new CircuitDetailResponse();
        response.setCircuitData(circuitData);

        String json = "{\"circuitData\": {\"circuitLst\": [{\"circuit\": [{\"clr\": [{\"equipmentComp\": [{\"portChannel\": [{\"portRef\": [{\"clliCode\": \"12345\"}]}]}]}]}]}]}}";
        Gson gson = new Gson();
        CircuitDetailResponse circuitDetailResponse = gson.fromJson(json, CircuitDetailResponse.class);

        // When
        ZEnd returnedZEnd = circuitDetailsProvider.getZEnd(CIRCUIT_ID, CLLI, circuitDetailResponse);

        // Then
        assertEquals(zEnd, returnedZEnd);
    }

    @Test
    void getZEnd_whenCableType() {
        // Given
        PortRef portRef = new PortRef();
        portRef.setClliCode(CLLI);
        CableComp cableComp = new CableComp();
        cableComp.setCableName("Test Cable");
        cableComp.setLocationA("A");
        cableComp.setLocationZ("Z");
        ClrComponent clrComponent = new ClrComponent();
        clrComponent.setEquipmentComp(List.of(new EquipmentComp(List.of(portRef))));
        Circuit circuit = new Circuit();
        circuit.setZEnd(List.of(new ZEnd()));
        Clr clr = new Clr();
        clr.setClrComponent(List.of(clrComponent, cableComp));
        circuit.setClr(List.of(clr));
        CircuitData circuitData = new CircuitData();
        circuitData.setCircuitLst(List.of(new CircuitLst(List.of(circuit))));
        CircuitDetailResponse response = new CircuitDetailResponse();
        response.setCircuitData(circuitData);

        String json = "{\"circuitData\": {\"circuitLst\": [{\"circuit\": [{\"clr\": [{\"equipmentComp\": [{\"portRef\": [{\"clliCode\": \"12345\"}]}]},{\"cableComp\": [{\"locationA\": \"A\", \"locationZ\": \"Z\", \"cableName\": \"Test Cable\"}]}]}]}]}}";
        Gson gson = new Gson();
        CircuitDetailResponse circuitDetailResponse = gson.fromJson(json, CircuitDetailResponse.class);

        // When
        ZEnd returnedZEnd = circuitDetailsProvider.getZEnd(CIRCUIT_ID, CLLI, circuitDetailResponse);

        // Then
        assertNull(returnedZEnd);
    }

    @Test
    void getZEnd_whenSizeLessThan2() {
        // Given
        Circuit circuit = new Circuit();
        circuit.setZEnd(List.of(new ZEnd()));
        Clr clr = new Clr();
        clr.setClrComponent(List.of(new ClrComponent()));
        circuit.setClr(List.of(clr));
        CircuitData circuitData = new CircuitData();
        circuitData.setCircuitLst(List.of(new CircuitLst(List.of(circuit))));
        CircuitDetailResponse response = new CircuitDetailResponse();
        response.setCircuitData(circuitData);

        String json = "{\"circuitData\": {\"circuitLst\": [{\"circuit\": [{\"clr\": [{\"clrComponent\": [{\"type\": \"PORT\"}]}]}]}]}}";
        Gson gson = new Gson();
        CircuitDetailResponse circuitDetailResponse = gson.fromJson(json, CircuitDetailResponse.class);

        // When
        ZEnd returnedZEnd = circuitDetailsProvider.getZEnd(CIRCUIT_ID, CLLI, circuitDetailResponse);

        // Then
        assertNull(returnedZEnd);
    }

    @Test
    void getZEnd_whenSizeGreaterThan2_and_secClrComponentPortType() {
        // Given
        PortRef portRef = new PortRef();
        portRef.setClliCode(CLLI);
        ClrComponent clrComponent = new ClrComponent();
        clrComponent.setEquipmentComp(List.of(new EquipmentComp(List.of(portRef))));
        ClrComponent secClrComponent = new ClrComponent();
        secClrComponent.setEquipmentComp(List.of(new EquipmentComp(List.of(portRef))));
        Circuit circuit = new Circuit();
        circuit.setZEnd(List.of(new ZEnd()));
        Clr clr = new Clr();
        clr.setClrComponent(List.of(clrComponent, secClrComponent));
        circuit.setClr(List.of(clr));
        CircuitData circuitData = new CircuitData();
        circuitData.setCircuitLst(List.of(new CircuitLst(List.of(circuit))));
        CircuitDetailResponse response = new CircuitDetailResponse();
        response.setCircuitData(circuitData);

        String json = "{\"circuitData\": {\"circuitLst\": [{\"circuit\": [{\"clr\": [{\"type\": \"PORT\"}, {\"type\": \"PORT\"}]}]}]}}";
        Gson gson = new Gson();
        CircuitDetailResponse circuitDetailResponse = gson.fromJson(json, CircuitDetailResponse.class);

        // When
        ZEnd returnedZEnd = circuitDetailsProvider.getZEnd(CIRCUIT_ID, CLLI, circuitDetailResponse);

        // Then
        assertNull(returnedZEnd);
    }

    @Test
    void getZEnd_whenSizeGreaterThan2_and_secClrComponentChannelType() {
        // Given
        PortRef portRef = new PortRef();
        portRef.setClliCode(CLLI);
        PortChannel portChannel = new PortChannel();
        portChannel.setPortRef