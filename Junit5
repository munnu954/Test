  @Test
    void testProcess_withSegmentAndTrail() {
        // Setup clrComponentList with necessary components
        ClrComponent prevClrComponent = mock(ClrComponent.class);
        when(prevClrComponent.getType()).thenReturn("SEGEMENT");

        // Configure the previous component to satisfy isNotNull condition
        CircuitComp circuitComp = mock(CircuitComp.class);
        CircuitInfo circuitInfo = mock(CircuitInfo.class);
        when(circuitComp.getCircuitInfo()).thenReturn(Collections.singletonList(circuitInfo));
        when(prevClrComponent.getCircuitComp()).thenReturn(Collections.singletonList(circuitComp));

        clrComponentList.add(prevClrComponent);
        clrComponentList.add(clrComponent);

        // Add a link to simulate previous link
        Link prevSegment = new Link();
        links.add(prevSegment);

        // Execute the process method
        trunkProcessor.process(nodes, links, clrComponent, clrComponentList, clliNodeMap, 1, ukCount, "sourceSys");

        // Verify the behavior
        assertEquals(2, links.size(), "Expected two links after processing");
        Link newCircuit = links.get(1);
        assertNotNull(newCircuit.getSource(), "Expected source to be set");
        assertEquals(CommonWrapperConstants.UNKNOWN + "1", newCircuit.getSource(), "Expected source port ID to be incremented");
    }